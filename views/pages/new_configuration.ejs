<!DOCTYPE html>
<html lang="en">

  <head>

    <% include ../partials/head.ejs %>
	
	<script>
		$(function() {
			$('.dropdown-menu a').click(function() {
				console.log($(this).attr('data-value'));
				$(this).closest('.dropdown').find('input.dropdown-toggle')
					.val($(this).attr('data-value'));
			});
		});
	</script>
	
	<style>
	a.dropdown-item {
		color: inherit;
		text-decoration: inherit;
	}
	span.border {
		border: 2px solid;
		border-radius: 3px 3px 3px;
		padding-right: 5px;
	}
	</style>

  </head>

  <body id="page-top">
	
	<div class="container-fluid">
		<h3><b>Create new Configuration</b></h3>
		<br /><hr /><br />
		<h4><u>Example</u></h4>
		<span>{"ID": "hss_with_lora_hat_01", "desc":"testsensor at HS Ulm", "TTN":{"DEVADDR": "12AB34CD", "APPEUI": "12ABCD3456AFEABE"}, "type":"haltestellensensor", "version":"1"}</span>
		<br /><hr /><br />
		<h4><u>Your sensor:</u></h4>
		<div class="row">
			<div class="col-sm-3">
				<div class="input-group dropdown">
				  <input id="type_text" type="text" class="form-control dropdown-toggle" value="haltestellensensor">
				  <ul class="dropdown-menu dropdown-menu-left pull-left">
					<li><a href="#" data-value="haltestellensensor" class="dropdown-item">haltestellensensor</a></li>
					<li><a href="#" data-value="wildwechselsensor" class="dropdown-item">wildwechselsensor</a></li>
					<li><a href="#" data-value="xysensor" class="dropdown-item">xysensor</a></li>
				  </ul>
				  <span role="button" class="input-group-addon dropdown-toggle pull-left border" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					<span class="caret"></span>
				  </span>
				</div>
			</div>
			<div class="col-sm-3">
				<div class="input-group dropdown">
				  <input id="version_text" type="text" class="form-control dropdown-toggle" value="1">
				  <ul class="dropdown-menu dropdown-menu-left pull-left">
					<li><a href="#" data-value="1" class="dropdown-item">1</a></li>
					<li><a href="#" data-value="2" class="dropdown-item">2</a></li>
					<li><a href="#" data-value="3" class="dropdown-item">3</a></li>
				  </ul>
				  <span role="button" class="input-group-addon dropdown-toggle pull-left border" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					<span class="caret"></span>
				  </span>
				</div>
			</div>
			<div class="col-sm-3">
				<input id="load_btn" class="btn" type="button" value="Load" />
				<input id="save_btn" class="btn" type="button" value="Save or Replace" />
			</div>
		</div>	
	
		<form enctype='application/json' id="new-sensor-form" method="post" action="/new_sensor" novalidate>
			<div class="row top-buffer">
				<div class="col">
					<textarea id="text" name="text" class="form-control" rows="10" cols="50" form="new-sensor-form"><%= text %></textarea>
				</div>
			</div>
			<% if(message != "") {%>
				<div class="row top-buffer">
					<div class="col">
						<font color="#f00"><%= message %></font><br />
					</div>
				</div>
			<% } %>
			<div class="row top-buffer">
				<div class="col">
					<input type="submit" class="btn btn-primary" value="Create sensor" />
				</div>
			</div>
		</form>
	</div>

  </body>

</html>
